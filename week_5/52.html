<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="../css/styleNew.css">

    <link rel="stylesheet" href="../css/styles/atom-one-dark.css">

    
    <script src="../highlight.pack.js"></script>
   
    <link rel="stylesheet"  href="../themes/prism.css"/>


    <title>Document</title>
</head>

<body>
        <div class="container-fluid ">
            <header>
                <div id="homeButton">
                        <a href="../index.html#4"><i class="material-icons md-46">home</i></a>
                    </div> 
    
            <div class="row mt-4"></div>
            <div class="row head bg-secondary shadow-sm">
               
                
                <div class="col-8 offset-2 text-white">
                        <span class="badge badge-light shadow">Treść zadania</span>
                    
                    <h3><br>
                        2. Funkcja tagująca do formatowania cen
                        </h3>
                        
                        <p>               
                            Utwórz funkcję tagującą, która użyta na tzw. template stringu w ES6, sformatuje podane w 
                            nim ceny za pomocą kodu: n.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'); 
                            (pożyczamy ciekawe rozwiązanie z tego postu). Zanim jednak dokonasz takiego 
                            formatowania, przelicz cenę przez kurs podanej przy wywołaniu funkcji tagującej waluty. 
                            Zakładamy, że ceny bazowe są podane w złotówkach, a nazwa i kurs waluty dostępna 
                            będzie pod window.currencies (mogłaby być w ten sposób dodana np. podczas 
                            renderowania strony przez system CMS, a dzięki temu mamy dostęp do tych danych w kodzie JavaScript. My jednak wpiszemy to sobie na sztywno). Przykładowe użycie tego 
                            kodu powinno wyglądać następująco: https://pastebin.com/6A3WZF6h. Zauważ, że przed 
                            samym template stringiem nie jest podana wyłącznie nazwa funkcji formatPrice, ale jest 
                            ona wywoływana z argumentem “GBP”. Jak być może się domyślasz, oznacza to, że ta 
                            funkcja ma zwrócić inną funkcję, która zostanie użyta jako tag function. Argument jest 
                            przekazywany po to, aby można go było zmienić np. na “USD” i wówczas funkcja powinna 
                            przeliczyć cenę po kursie dolara, a także dodać przyrostki USD do ceny w sformatowanym 
                            ciągu. Zwracana funkcja, która posłuży jako funkcja tagująca, powinna mieć zatem dostęp 
                            do zmiennej przechowującej kurs oraz nazwę waluty dla podanego argumentu. 
                            Zrealizujesz to za pomocą domknięcia.
                        </p>
    
                        <br>
                </div>
    
    
            </div>
        </header>

          
            <!----------- MAIN TASK ------------>
            <br>
                    
            <div class="row justify-content-center ">
    
                <div class="col-md-8 bg-white shadow rounded">
                        <span class="badge badge-secondary shadow">Rozwiązanie</span>


                        <div class="row justify-content-center py-4">

                            <div class="col">
                                <form id="form_products">
                                    <div class="form-row justify-content-around">
                                        <div class="col-auto">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="product" id="radio_pendrive" value="pendrive">
                                                <label class="form-check-label" for="radio_pendrive">
                                                Pendirve
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="product" id="radio_charger" value="charger" checked>
                                                <label class="form-check-label" for="radio_charger">
                                                Ładowarka
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="product" id="radio_earphones" value="earphones">
                                                <label class="form-check-label" for="radio_earphones">
                                                Słuchawki
                                                </label>
                                            </div>
                                        </div>

                                        <div class="col-auto">
                                            <label for=""></label>
                                            <input type="number" class="form-control" id="input_number" placeholder="Liczba sztuk" min="1" value="2">
                                        </div>

                                        <div class="col-auto">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="currency" id="radio_euro" value="PLN" checked>
                                                <label class="form-check-label" for="radio_euro">
                                                PLN
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="currency" id="radio_euro" value="EUR" checked>
                                                <label class="form-check-label" for="radio_euro">
                                                EUR
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="currency" id="radio_usd" value="USD">
                                                <label class="form-check-label" for="radio_usd">
                                                USD
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="currency" id="radio_gpb" value="GBP">
                                                <label class="form-check-label" for="radio_gpb">
                                                GBP
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    
                                </form>
                            </div>
                        </div>
                        <div class="row justify-content-center">

                            <div class="col-auto py-3">
                                <button id="button_calculate" class="btn btn-outline-secondary">Oblicz</button>
                            </div>
    
                        </div>

                        <div class="row justify-content-center">

                            <div class="col-auto py-3">
                                <p id="description"></p>
                            </div>
    
                        </div>

  
                </div>
    
            </div>
            <br><br>

            <div class="row bg-secondary">
              
                <div class="col-8 offset-2 ">
                    <br><br>
                    <span class="badge badge-light shadow">Kody źródłowe</span>
                    <div class="accordion" id="accordionExample">
                            <div class="card text-white bg-dark border-dark ">
                              <div class="card-header" id="headingOne">
                                <h5 class="mb-0">
                                    <br>
                                  <button class="btn btn-link text-white" type="button" data-toggle="collapse" data-target="#collapseOne">
                                        <h5 class="card-title">Funkcja formatPrice():</h5>
                                  </button>
                                </h5>
                              </div>
                          
                              <div id="collapseOne" class="collapse show" data-parentt="#accordionExample">
                               
                                        <pre class="code">
        function formatPrice(currency){

            let exchangeRate = window.currencies[ currency ];
        
            return function(strings, ...values) {
        
                let output = strings[0] + values[0] + strings[1] + (values[1]/exchangeRate).toFixed(2) + " " +
                                currency + strings[2] + (values[2]/exchangeRate).toFixed(2) + " " + currency + strings[3];
        
                return output;
            }
        }
</pre>
                              </div>
                            </div>

                            <div class="card text-white bg-dark border-dark ">
                              <div class="card-header" id="headingOne">
                                <h5 class="mb-0">
                                    <br>
                                  <button class="btn btn-link text-white" type="button" data-toggle="collapse" data-target="#collapseTwo">
                                        <h5 class="card-title">Cały kod:</h5>
                                  </button>
                                </h5>
                              </div>
                          
                              <div id="collapseTwo" class="collapse show" data-parentt="#accordionExample">
                               
                                        <pre class="code">
        var radioProduct = document.querySelectorAll("input[name='product']"),
        radioCurrency = document.querySelectorAll("input[name='currency']"),
        inputNumber = document.getElementById("input_number"),
        output_description = document.getElementById("description"),
        button_calculate = document.getElementById("button_calculate");
    
         button_calculate.addEventListener( "click", function () {
        
        let chosenProduct = "",
            chosenCurrency = "",
            prices = {
                "pendrive": 2,
                "charger": 54,
                "earphones": 123
            };
            product = {};
    
            console.log(prices.pendrive);
    
        for( let key in radioProduct ){
            if(radioProduct[key].checked){
                chosenProduct = radioProduct[key].value
            }
        }
    
        for( let key in radioCurrency ){
            if(radioCurrency[key].checked){
                chosenCurrency = radioCurrency[key].value
            }
        }
    
        product.name = chosenProduct;
        product.quantity = parseInt(inputNumber.value);
        product.price = prices[chosenProduct];
    
        let { name: pName, price: pPrice, quantity: pQuantity } = product;
    
        let info = formatPrice(chosenCurrency)`Kupiłeś produkt '${pName}' w cenie ${pPrice} za sztukę. 
                    Łączna wartość zamówienia to ${pPrice * pQuantity}.`;
    
        output_description.innerText = info;
    });
    
    window.currencies = {
        "PLN": 1,
        "USD": 3.8078,
        "EUR": 4.1794,
        "GBP": 4.9456
    };
    
    function formatPrice(currency){
    
        let exchangeRate = window.currencies[ currency ];
    
        return function(strings, ...values) {
    
            let output = strings[0] + values[0] + strings[1] + (values[1]/exchangeRate).toFixed(2) + " " +
                            currency + strings[2] + (values[2]/exchangeRate).toFixed(2) + " " + currency + strings[3];
    
            return output;
        }
    }
</pre>
                              </div>
                            </div>

                          </div>
                          <br><br>
                </div>
    
    
            </div>
            <br><br>
    
    
        </div>
        
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
        <script src="52.js"></script>
    
    <script>

            $('.code').each(function(i, block) {
              hljs.highlightBlock(block);
                });
                
    </script>        
    <script src="../prism.js"></script>
            
    </body>

</html>